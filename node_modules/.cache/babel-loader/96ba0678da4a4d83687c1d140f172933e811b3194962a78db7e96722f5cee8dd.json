{"ast":null,"code":"import _objectSpread from\"/Users/prabdhar/CascadeProjects/windsurf-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Search,Filter,Plus,Edit,Trash2,MapPin,Phone,Mail,Calendar,Store,Star,CheckCircle,AlertTriangle,Clock,ArrowLeft,Camera,Eye,X,ChevronLeft,ChevronRight,Image}from'lucide-react';import InspectionForm from'./InspectionForm';import{getInspectionPhotos,savePhotoToLocal,deletePhoto}from'../utils/photoStorage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EstablishmentManagement=()=>{const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('all');const[showAddModal,setShowAddModal]=useState(false);const[showInspectionForm,setShowInspectionForm]=useState(false);const[selectedSchoolForInspection,setSelectedSchoolForInspection]=useState(null);const[selectedSchool,setSelectedSchool]=useState(null);const[selectedPhoto,setSelectedPhoto]=useState(null);const[editingSchool,setEditingSchool]=useState(null);const[showEditModal,setShowEditModal]=useState(false);const[uploadingFacilityPhotos,setUploadingFacilityPhotos]=useState(false);const[selectedFacilityType,setSelectedFacilityType]=useState('kitchen');const handleEditSchool=schoolId=>{const school=establishments.find(e=>e.id===schoolId);if(school){setEditingSchool(_objectSpread({},school));setShowEditModal(true);}};const handleCloseEditModal=()=>{setShowEditModal(false);setEditingSchool(null);};const handleSaveSchool=updatedSchool=>{// In a real app, this would make an API call to update the school\nconsole.log('Saving school:',updatedSchool);// For now, we'll just close the modal\nsetShowEditModal(false);setEditingSchool(null);// You could update the local state here if needed\nalert('School information updated successfully!');};const handleInspectSchool=schoolId=>{// Open inspection form with pre-selected school\nconsole.log('Starting inspection for school ID:',schoolId);setSelectedSchoolForInspection(schoolId);setShowInspectionForm(true);};const handleNewInspection=()=>{// Open inspection form without pre-selected school\nsetSelectedSchoolForInspection(null);setShowInspectionForm(true);};const handleCloseInspectionForm=()=>{setShowInspectionForm(false);setSelectedSchoolForInspection(null);};const loadInspectionPhotos=schoolId=>{try{// Get all inspections for this school from localStorage\nconst existingInspections=JSON.parse(localStorage.getItem('inspections')||'[]');const schoolInspections=existingInspections.filter(inspection=>inspection.schoolId===schoolId||inspection.schoolId===schoolId.toString());// Collect all photos from all inspections for this school\nconst allPhotos=[];schoolInspections.forEach(inspection=>{if(inspection.photos&&inspection.photos.length>0){inspection.photos.forEach(photo=>{// Get the actual photo data from storage\nconst existingPhotos=JSON.parse(localStorage.getItem('inspectionPhotos')||'[]');const photoData=existingPhotos.find(p=>p.id===photo.id);if(photoData){allPhotos.push({id:photo.id,url:photoData.data,// base64 data for display\ncaption:\"Inspection Photo - \".concat(photo.originalName),date:inspection.inspectionDate||photo.uploadDate,inspector:inspection.inspectorName||'Unknown Inspector',inspectionId:inspection.inspectionId,localPath:photo.localPath,originalName:photo.originalName,size:photo.size});}});}});// Also load facility photos\nconst existingFacilityPhotos=JSON.parse(localStorage.getItem('facilityPhotos')||'[]');const schoolFacilityPhotos=existingFacilityPhotos.filter(photo=>photo.schoolId===schoolId||photo.schoolId===schoolId.toString());schoolFacilityPhotos.forEach(photo=>{const existingPhotos=JSON.parse(localStorage.getItem('inspectionPhotos')||'[]');const photoData=existingPhotos.find(p=>p.id===photo.id);if(photoData){allPhotos.push({id:photo.id,url:photoData.data,caption:\"\".concat(photo.facilityType.charAt(0).toUpperCase()+photo.facilityType.slice(1),\" Facility - \").concat(photo.originalName),date:photo.uploadDate,inspector:'Facility Manager',facilityType:photo.facilityType,facilityId:photo.facilityId,localPath:photo.localPath,originalName:photo.originalName,size:photo.size});}});return allPhotos;}catch(error){console.error('Error loading inspection photos:',error);return[];}};const handleViewSchool=schoolId=>{const school=establishments.find(e=>e.id===schoolId);if(school){// Load actual inspection photos from storage\nconst inspectionPhotos=loadInspectionPhotos(schoolId);// Combine static photos with inspection photos\nconst allPhotos=[...(school.photos||[]),// Keep existing static photos\n...inspectionPhotos// Add inspection photos\n];setSelectedSchool(_objectSpread(_objectSpread({},school),{},{photos:allPhotos}));}};const handleBackToList=()=>{setSelectedSchool(null);setSelectedPhoto(null);};const handleFacilityPhotoUpload=async event=>{const files=Array.from(event.target.files);if(!selectedSchool){alert('No school selected for photo upload.');return;}setUploadingFacilityPhotos(true);try{const facilityId=\"FACILITY_\".concat(selectedFacilityType.toUpperCase(),\"_\").concat(Date.now());const photoPromises=files.map(async file=>{try{const savedPhoto=await savePhotoToLocal(file,selectedSchool.id,facilityId);return{id:savedPhoto.id,file:file,name:savedPhoto.originalName,filename:savedPhoto.filename,path:savedPhoto.path,size:savedPhoto.size,preview:savedPhoto.url,uploadDate:new Date().toISOString(),localPath:\"inspectPhotos/school_\".concat(selectedSchool.id,\"/facility_\").concat(selectedFacilityType,\"/\").concat(savedPhoto.filename),facilityType:selectedFacilityType,facilityId:facilityId};}catch(error){console.error('Error uploading facility photo:',file.name,error);return null;}});const uploadedPhotos=await Promise.all(photoPromises);const successfulUploads=uploadedPhotos.filter(photo=>photo!==null);// Update the selected school with new facility photos\nconst updatedPhotos=[...(selectedSchool.photos||[]),...successfulUploads.map(photo=>_objectSpread(_objectSpread({},photo),{},{caption:\"\".concat(selectedFacilityType.charAt(0).toUpperCase()+selectedFacilityType.slice(1),\" Facility - \").concat(photo.name),date:photo.uploadDate,inspector:'Facility Manager',facilityType:selectedFacilityType}))];setSelectedSchool(_objectSpread(_objectSpread({},selectedSchool),{},{photos:updatedPhotos}));// Save facility photos to localStorage\nconst existingFacilityPhotos=JSON.parse(localStorage.getItem('facilityPhotos')||'[]');const facilityPhotoData=successfulUploads.map(photo=>_objectSpread(_objectSpread({},photo),{},{schoolId:selectedSchool.id,facilityType:selectedFacilityType,uploadDate:new Date().toISOString()}));localStorage.setItem('facilityPhotos',JSON.stringify([...existingFacilityPhotos,...facilityPhotoData]));if(successfulUploads.length<files.length){alert(\"\".concat(files.length-successfulUploads.length,\" photos failed to upload. Please try again.\"));}else{alert(\"Successfully uploaded \".concat(successfulUploads.length,\" \").concat(selectedFacilityType,\" facility photos!\"));}}catch(error){console.error('Error during facility photo upload:',error);alert('Error uploading facility photos. Please try again.');}finally{setUploadingFacilityPhotos(false);}};const establishments=[{id:1,name:'Government High School Bangalore North',type:'Government School',owner:'Karnataka Education Department',location:'Bangalore North, Karnataka',phone:'+91 80 2234 5678',email:'ghsblrnorth@karnataka.gov.in',licenseNumber:'KGS-2024-001',rating:'B+',status:'Active',lastInspection:'2024-01-15',nextInspection:'2024-04-15',violations:2,category:'Higher Secondary',level:'State Level',photos:[{id:1,url:\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGMEY4RkYiLz4KICA8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRDZFQUY4IiByeD0iNSIvPgogIDxjaXJjbGUgY3g9IjgwIiBjeT0iMTIwIiByPSIyMCIgZmlsbD0iIzYzNzVGNCIvPgogIDx0ZXh0IHg9IjE1MCIgeT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMxRjJBMzciIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiPktpdGNoZW4gQXJlYTwvdGV4dD4KPC9zdmc+\",caption:\"Clean kitchen facilities\",date:\"2024-01-15\",inspector:\"Rajesh Kumar\"},{id:2,url:\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGRUY3RUQiLz4KICA8ZWxsaXBzZSBjeD0iMTUwIiBjeT0iMTMwIiByeD0iODAiIHJ5PSI0MCIgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjRDFEOEUwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMUYyQTM3IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj5EaW5pbmcgQXJlYTwvdGV4dD4KPC9zdmc+\",caption:\"Student dining area\",date:\"2024-01-15\",inspector:\"Rajesh Kumar\"}]},{id:2,name:'Government Primary School Mysore',type:'Government School',owner:'Karnataka Education Department',location:'Mysore, Karnataka',phone:'+91 821 2345 678',email:'gpsmysore@karnataka.gov.in',licenseNumber:'KGS-2024-002',rating:'A',status:'Active',lastInspection:'2024-01-10',nextInspection:'2024-04-10',violations:0,category:'Primary School',level:'District Level',photos:[{id:3,url:\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGRkY3RUQiLz4KICA8cmVjdCB4PSIyMCIgeT0iNjAiIHdpZHRoPSIyNjAiIGhlaWdodD0iMTUiIGZpbGw9IiM4QjVDRjYiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMUYyQTM3IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj5TdG9yYWdlIEFyZWE8L3RleHQ+Cjwvc3ZnPg==\",caption:\"Food storage facilities\",date:\"2024-01-10\",inspector:\"Priya Sharma\"}]},{id:3,name:'Government Higher Secondary School Hubli',type:'Government School',owner:'Karnataka Education Department',location:'Hubli, Karnataka',phone:'+91 836 2456 789',email:'ghsshubli@karnataka.gov.in',licenseNumber:'KGS-2024-003',rating:'A',status:'Active',lastInspection:'2024-01-08',nextInspection:'2024-04-08',violations:0,category:'Higher Secondary',level:'State Level'},{id:4,name:'Government Primary School Mangalore',type:'Government School',owner:'Karnataka Education Department',location:'Mangalore, Karnataka',phone:'+91 824 2567 890',email:'gpsmangalore@karnataka.gov.in',licenseNumber:'KGS-2024-004',rating:'C',status:'Under Review',lastInspection:'2024-01-20',nextInspection:'2024-02-20',violations:4,category:'Primary School',level:'Taluk Level'}];const filteredEstablishments=establishments.filter(establishment=>{const matchesSearch=establishment.name.toLowerCase().includes(searchTerm.toLowerCase())||establishment.owner.toLowerCase().includes(searchTerm.toLowerCase())||establishment.location.toLowerCase().includes(searchTerm.toLowerCase());const matchesFilter=filterStatus==='all'||establishment.status.toLowerCase()===filterStatus;return matchesSearch&&matchesFilter;});const getRatingColor=rating=>{switch(rating){case'A':return'bg-green-100 text-green-800';case'B+':case'B':return'bg-yellow-100 text-yellow-800';case'C':case'D':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getStatusColor=status=>{switch(status){case'Active':return'badge-success';case'Under Review':return'badge-warning';case'Suspended':return'badge-danger';default:return'badge-info';}};// Edit School Modal Component\nconst EditSchoolModal=_ref=>{let{school,onClose,onSave}=_ref;const[formData,setFormData]=useState({name:(school===null||school===void 0?void 0:school.name)||'',type:(school===null||school===void 0?void 0:school.type)||'',owner:(school===null||school===void 0?void 0:school.owner)||'',location:(school===null||school===void 0?void 0:school.location)||'',phone:(school===null||school===void 0?void 0:school.phone)||'',email:(school===null||school===void 0?void 0:school.email)||'',licenseNumber:(school===null||school===void 0?void 0:school.licenseNumber)||'',category:(school===null||school===void 0?void 0:school.category)||'',status:(school===null||school===void 0?void 0:school.status)||'Active'});const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=e=>{e.preventDefault();onSave(_objectSpread(_objectSpread({},school),formData));};if(!school)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Edit School Information\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"School Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"School Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:formData.type,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Government School\",children:\"Government School\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Government Aided School\",children:\"Government Aided School\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Primary School\",children:\"Primary School\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Higher Secondary\",children:\"Higher Secondary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"High School\",children:\"High School\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"School Level\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"level\",value:formData.level,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"State Level\",children:\"State Level\"}),/*#__PURE__*/_jsx(\"option\",{value:\"District Level\",children:\"District Level\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Taluk Level\",children:\"Taluk Level\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Under Review\",children:\"Under Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Suspended\",children:\"Suspended\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Owner/Department\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"owner\",value:formData.owner,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:formData.location,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"License Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"licenseNumber\",value:formData.licenseNumber,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",children:\"Save Changes\"})]})]})]})});};// Photo Modal Component\nconst PhotoModal=_ref2=>{let{photo,onClose,onNext,onPrev,hasNext,hasPrev}=_ref2;if(!photo)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute top-4 right-4 text-white hover:text-gray-300\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(X,{size:32})}),hasPrev&&/*#__PURE__*/_jsx(\"button\",{onClick:onPrev,className:\"absolute left-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\",\"aria-label\":\"Previous photo\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:32})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative max-w-4xl w-full\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.url,alt:photo.caption||'Inspection photo',className:\"max-h-[80vh] w-auto mx-auto object-contain rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-white text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(photo.inspectionId?'bg-blue-600 text-white':photo.facilityType?'bg-green-600 text-white':'bg-gray-600 text-white'),children:photo.inspectionId?'🔍 Inspection Photo':photo.facilityType?\"\".concat(photo.facilityType==='kitchen'?'🍳':photo.facilityType==='storeroom'?'📦':'🏢',\" \").concat(photo.facilityType.charAt(0).toUpperCase()+photo.facilityType.slice(1),\" Facility\"):'📁 Archive Photo'})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:photo.caption}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Inspector:\"}),\" \",photo.inspector||'Unknown']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Date:\"}),\" \",new Date(photo.date).toLocaleDateString()]}),photo.originalName&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Original Name:\"}),\" \",photo.originalName]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[photo.size&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"File Size:\"}),\" \",Math.round(photo.size/1024),\" KB\"]}),photo.inspectionId&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Inspection ID:\"}),\" \",photo.inspectionId]}),photo.localPath&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 truncate\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Local Path:\"}),\" \",photo.localPath]})]})]})]})]}),hasNext&&/*#__PURE__*/_jsx(\"button\",{onClick:onNext,className:\"absolute right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\",\"aria-label\":\"Next photo\",children:/*#__PURE__*/_jsx(ChevronRight,{size:32})})]});};// If a school is selected, show school detail view\nif(selectedSchool){var _selectedSchool$photo,_selectedSchool$photo2,_selectedSchool$photo3;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glass-card p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToList,className:\"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white\",children:selectedSchool.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:selectedSchool.location})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded text-sm font-bold \".concat(getRatingColor(selectedSchool.rating)),children:selectedSchool.rating}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(getStatusColor(selectedSchool.status)),children:selectedSchool.status})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"School Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Store,{className:\"w-4 h-4 mr-3 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:selectedSchool.type}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:selectedSchool.category}),selectedSchool.level&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium \".concat(selectedSchool.level==='State Level'?'bg-purple-100 text-purple-800':selectedSchool.level==='District Level'?'bg-blue-100 text-blue-800':'bg-green-100 text-green-800'),children:selectedSchool.level})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-3 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:\"Location\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:selectedSchool.location})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 mr-3 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:selectedSchool.phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 mr-3 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:selectedSchool.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-3 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:\"Last Inspection\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:selectedSchool.lastInspection})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Upload Facility Photos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Facility Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedFacilityType,onChange:e=>setSelectedFacilityType(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"kitchen\",children:\"\\uD83C\\uDF73 Kitchen Facilities\"}),/*#__PURE__*/_jsx(\"option\",{value:\"storeroom\",children:\"\\uD83D\\uDCE6 Store Room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dining\",children:\"\\uD83C\\uDF7D\\uFE0F Dining Area\"}),/*#__PURE__*/_jsx(\"option\",{value:\"washroom\",children:\"\\uD83D\\uDEBF Wash Room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"playground\",children:\"\\u26BD Playground\"}),/*#__PURE__*/_jsx(\"option\",{value:\"classroom\",children:\"\\uD83D\\uDCDA Classroom\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(Camera,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-2\",children:[\"Upload \",selectedFacilityType,\" facility photos\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mb-4\",children:[\"Photos will be stored in: inspectPhotos/school_\",selectedSchool.id,\"/facility_\",selectedFacilityType,\"/\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"facility-photo-upload\",multiple:true,accept:\"image/*\",onChange:handleFacilityPhotoUpload,className:\"hidden\",disabled:uploadingFacilityPhotos}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>document.getElementById('facility-photo-upload').click(),disabled:uploadingFacilityPhotos,className:\"px-4 py-2 rounded-lg transition-colors \".concat(uploadingFacilityPhotos?'bg-gray-400 cursor-not-allowed text-white':'bg-green-600 hover:bg-green-700 text-white'),children:uploadingFacilityPhotos?'Uploading...':\"Upload \".concat(selectedFacilityType.charAt(0).toUpperCase()+selectedFacilityType.slice(1),\" Photos\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-green-600\",children:((_selectedSchool$photo=selectedSchool.photos)===null||_selectedSchool$photo===void 0?void 0:_selectedSchool$photo.filter(p=>p.facilityType==='kitchen').length)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600\",children:\"Kitchen Photos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-600\",children:((_selectedSchool$photo2=selectedSchool.photos)===null||_selectedSchool$photo2===void 0?void 0:_selectedSchool$photo2.filter(p=>p.facilityType==='storeroom').length)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600\",children:\"Store Room Photos\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Inspection Photo Gallery\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Camera,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[((_selectedSchool$photo3=selectedSchool.photos)===null||_selectedSchool$photo3===void 0?void 0:_selectedSchool$photo3.length)||0,\" photos\"]})]})]}),selectedSchool.photos&&selectedSchool.photos.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:selectedSchool.photos.filter(p=>p.inspectionId).length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600\",children:\"Inspection Photos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:selectedSchool.photos.filter(p=>p.facilityType).length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600\",children:\"Facility Photos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-600\",children:selectedSchool.photos.filter(p=>!p.inspectionId&&!p.facilityType).length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"Archive Photos\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600\",children:new Set(selectedSchool.photos.filter(p=>p.inspector).map(p=>p.inspector)).size}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-600\",children:\"Inspectors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 p-3 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-orange-600\",children:Math.round(selectedSchool.photos.reduce((sum,p)=>sum+(p.size||0),0)/1024)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-orange-600\",children:\"Total KB\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:selectedSchool.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group cursor-pointer bg-white border rounded-lg overflow-hidden hover:shadow-lg transition-all duration-200\",onClick:()=>setSelectedPhoto(photo),children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2 z-10\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(photo.inspectionId?'bg-blue-100 text-blue-800':photo.facilityType?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'),children:photo.inspectionId?'🔍 Inspection':photo.facilityType?\"\".concat(photo.facilityType==='kitchen'?'🍳':photo.facilityType==='storeroom'?'📦':'🏢',\" \").concat(photo.facilityType.charAt(0).toUpperCase()+photo.facilityType.slice(1)):'📁 Archive'})}),/*#__PURE__*/_jsx(\"img\",{src:photo.url,alt:photo.caption,className:\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(Eye,{className:\"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-sm font-medium truncate\",children:photo.caption}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-gray-300 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:new Date(photo.date).toLocaleDateString()}),photo.size&&/*#__PURE__*/_jsxs(\"span\",{children:[Math.round(photo.size/1024),\" KB\"]})]}),photo.inspector&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400 truncate\",children:[\"By: \",photo.inspector]})]}),photo.localPath&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2 z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-black bg-opacity-70 text-white p-1 rounded text-xs\",title:photo.localPath,children:\"\\uD83D\\uDCC1\"})})]},photo.id||index))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No inspection photos available\"})]})]})})]}),selectedPhoto&&/*#__PURE__*/_jsx(PhotoModal,{photo:selectedPhoto,onClose:()=>setSelectedPhoto(null),onNext:()=>{const currentIndex=selectedSchool.photos.findIndex(p=>p.id===selectedPhoto.id);if(currentIndex<selectedSchool.photos.length-1){setSelectedPhoto(selectedSchool.photos[currentIndex+1]);}},onPrev:()=>{const currentIndex=selectedSchool.photos.findIndex(p=>p.id===selectedPhoto.id);if(currentIndex>0){setSelectedPhoto(selectedSchool.photos[currentIndex-1]);}},hasNext:selectedSchool.photos.findIndex(p=>p.id===selectedPhoto.id)<selectedSchool.photos.length-1,hasPrev:selectedSchool.photos.findIndex(p=>p.id===selectedPhoto.id)>0})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glass-card p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white\",children:\"Karnataka Government School Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddModal(true),className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Add School\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleNewInspection,className:\"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5\"}),\"New Inspection\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"glass-card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search government schools...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:filterStatus,onChange:e=>setFilterStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"under review\",children:\"Under Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"suspended\",children:\"Suspended\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"More Filters\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\",children:filteredEstablishments.map(establishment=>/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 hover:shadow-xl transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Store,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-gray-900\",children:establishment.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:establishment.type}),establishment.level&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium \".concat(establishment.level==='State Level'?'bg-purple-100 text-purple-800':establishment.level==='District Level'?'bg-blue-100 text-blue-800':'bg-green-100 text-green-800'),children:establishment.level})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs font-bold \".concat(getRatingColor(establishment.rating)),children:establishment.rating}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-medium \".concat(getStatusColor(establishment.status)),children:establishment.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-2\"}),establishment.location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 mr-2\"}),establishment.phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 mr-2\"}),establishment.email]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"License:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:establishment.licenseNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Last Inspection:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:establishment.lastInspection})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Violations:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(establishment.violations>0?'text-red-600':'text-green-600'),children:establishment.violations})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleViewSchool(establishment.id),className:\"flex-1 bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-3 rounded-lg flex items-center justify-center transition-colors\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4 mr-1\"}),\"View\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleEditSchool(establishment.id),className:\"flex-1 btn-secondary text-sm py-2 hover:bg-blue-50 transition-colors\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 mr-1\"}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleInspectSchool(establishment.id),className:\"flex-1 btn-primary text-sm py-2 hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),\"Inspect\"]})]})]})]},establishment.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3\",children:/*#__PURE__*/_jsx(Store,{className:\"w-6 h-6 text-blue-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:establishments.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Total Establishments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-3\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-6 h-6 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:establishments.filter(e=>e.status==='Active').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-3\",children:/*#__PURE__*/_jsx(Clock,{className:\"w-6 h-6 text-yellow-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:establishments.filter(e=>e.status==='Under Review').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Under Review\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mx-auto mb-3\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-6 h-6 text-red-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:establishments.reduce((sum,e)=>sum+e.violations,0)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Total Violations\"})]})]}),showInspectionForm&&/*#__PURE__*/_jsx(InspectionForm,{onClose:handleCloseInspectionForm,preSelectedSchoolId:selectedSchoolForInspection,isModal:true}),showEditModal&&editingSchool&&/*#__PURE__*/_jsx(EditSchoolModal,{school:editingSchool,onClose:handleCloseEditModal,onSave:handleSaveSchool})]});};export default EstablishmentManagement;","map":{"version":3,"names":["React","useState","Search","Filter","Plus","Edit","Trash2","MapPin","Phone","Mail","Calendar","Store","Star","CheckCircle","AlertTriangle","Clock","ArrowLeft","Camera","Eye","X","ChevronLeft","ChevronRight","Image","InspectionForm","getInspectionPhotos","savePhotoToLocal","deletePhoto","jsx","_jsx","jsxs","_jsxs","EstablishmentManagement","searchTerm","setSearchTerm","filterStatus","setFilterStatus","showAddModal","setShowAddModal","showInspectionForm","setShowInspectionForm","selectedSchoolForInspection","setSelectedSchoolForInspection","selectedSchool","setSelectedSchool","selectedPhoto","setSelectedPhoto","editingSchool","setEditingSchool","showEditModal","setShowEditModal","uploadingFacilityPhotos","setUploadingFacilityPhotos","selectedFacilityType","setSelectedFacilityType","handleEditSchool","schoolId","school","establishments","find","e","id","_objectSpread","handleCloseEditModal","handleSaveSchool","updatedSchool","console","log","alert","handleInspectSchool","handleNewInspection","handleCloseInspectionForm","loadInspectionPhotos","existingInspections","JSON","parse","localStorage","getItem","schoolInspections","filter","inspection","toString","allPhotos","forEach","photos","length","photo","existingPhotos","photoData","p","push","url","data","caption","concat","originalName","date","inspectionDate","uploadDate","inspector","inspectorName","inspectionId","localPath","size","existingFacilityPhotos","schoolFacilityPhotos","facilityType","charAt","toUpperCase","slice","facilityId","error","handleViewSchool","inspectionPhotos","handleBackToList","handleFacilityPhotoUpload","event","files","Array","from","target","Date","now","photoPromises","map","file","savedPhoto","name","filename","path","preview","toISOString","uploadedPhotos","Promise","all","successfulUploads","updatedPhotos","facilityPhotoData","setItem","stringify","type","owner","location","phone","email","licenseNumber","rating","status","lastInspection","nextInspection","violations","category","level","filteredEstablishments","establishment","matchesSearch","toLowerCase","includes","matchesFilter","getRatingColor","getStatusColor","EditSchoolModal","_ref","onClose","onSave","formData","setFormData","handleInputChange","value","prev","handleSubmit","preventDefault","className","children","onClick","onSubmit","onChange","required","PhotoModal","_ref2","onNext","onPrev","hasNext","hasPrev","src","alt","toLocaleDateString","Math","round","_selectedSchool$photo","_selectedSchool$photo2","_selectedSchool$photo3","multiple","accept","disabled","document","getElementById","click","Set","reduce","sum","index","title","currentIndex","findIndex","placeholder","preSelectedSchoolId","isModal"],"sources":["/Users/prabdhar/CascadeProjects/windsurf-project/src/components/EstablishmentManagement.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n  Search, \n  Filter, \n  Plus, \n  Edit, \n  Trash2, \n  MapPin, \n  Phone, \n  Mail, \n  Calendar,\n  Store,\n  Star,\n  CheckCircle,\n  AlertTriangle,\n  Clock,\n  ArrowLeft,\n  Camera,\n  Eye,\n  X,\n  ChevronLeft,\n  ChevronRight,\n  Image\n} from 'lucide-react';\nimport InspectionForm from './InspectionForm';\nimport { getInspectionPhotos, savePhotoToLocal, deletePhoto } from '../utils/photoStorage';\n\nconst EstablishmentManagement = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showInspectionForm, setShowInspectionForm] = useState(false);\n  const [selectedSchoolForInspection, setSelectedSchoolForInspection] = useState(null);\n  const [selectedSchool, setSelectedSchool] = useState(null);\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\n  const [editingSchool, setEditingSchool] = useState(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [uploadingFacilityPhotos, setUploadingFacilityPhotos] = useState(false);\n  const [selectedFacilityType, setSelectedFacilityType] = useState('kitchen');\n\n  const handleEditSchool = (schoolId) => {\n    const school = establishments.find(e => e.id === schoolId);\n    if (school) {\n      setEditingSchool({ ...school });\n      setShowEditModal(true);\n    }\n  };\n\n  const handleCloseEditModal = () => {\n    setShowEditModal(false);\n    setEditingSchool(null);\n  };\n\n  const handleSaveSchool = (updatedSchool) => {\n    // In a real app, this would make an API call to update the school\n    console.log('Saving school:', updatedSchool);\n    // For now, we'll just close the modal\n    setShowEditModal(false);\n    setEditingSchool(null);\n    // You could update the local state here if needed\n    alert('School information updated successfully!');\n  };\n\n  const handleInspectSchool = (schoolId) => {\n    // Open inspection form with pre-selected school\n    console.log('Starting inspection for school ID:', schoolId);\n    setSelectedSchoolForInspection(schoolId);\n    setShowInspectionForm(true);\n  };\n\n  const handleNewInspection = () => {\n    // Open inspection form without pre-selected school\n    setSelectedSchoolForInspection(null);\n    setShowInspectionForm(true);\n  };\n\n  const handleCloseInspectionForm = () => {\n    setShowInspectionForm(false);\n    setSelectedSchoolForInspection(null);\n  };\n\n  const loadInspectionPhotos = (schoolId) => {\n    try {\n      // Get all inspections for this school from localStorage\n      const existingInspections = JSON.parse(localStorage.getItem('inspections') || '[]');\n      const schoolInspections = existingInspections.filter(inspection => \n        inspection.schoolId === schoolId || inspection.schoolId === schoolId.toString()\n      );\n      \n      // Collect all photos from all inspections for this school\n      const allPhotos = [];\n      schoolInspections.forEach(inspection => {\n        if (inspection.photos && inspection.photos.length > 0) {\n          inspection.photos.forEach(photo => {\n            // Get the actual photo data from storage\n            const existingPhotos = JSON.parse(localStorage.getItem('inspectionPhotos') || '[]');\n            const photoData = existingPhotos.find(p => p.id === photo.id);\n            \n            if (photoData) {\n              allPhotos.push({\n                id: photo.id,\n                url: photoData.data, // base64 data for display\n                caption: `Inspection Photo - ${photo.originalName}`,\n                date: inspection.inspectionDate || photo.uploadDate,\n                inspector: inspection.inspectorName || 'Unknown Inspector',\n                inspectionId: inspection.inspectionId,\n                localPath: photo.localPath,\n                originalName: photo.originalName,\n                size: photo.size\n              });\n            }\n          });\n        }\n      });\n      \n      // Also load facility photos\n      const existingFacilityPhotos = JSON.parse(localStorage.getItem('facilityPhotos') || '[]');\n      const schoolFacilityPhotos = existingFacilityPhotos.filter(photo => \n        photo.schoolId === schoolId || photo.schoolId === schoolId.toString()\n      );\n      \n      schoolFacilityPhotos.forEach(photo => {\n        const existingPhotos = JSON.parse(localStorage.getItem('inspectionPhotos') || '[]');\n        const photoData = existingPhotos.find(p => p.id === photo.id);\n        \n        if (photoData) {\n          allPhotos.push({\n            id: photo.id,\n            url: photoData.data,\n            caption: `${photo.facilityType.charAt(0).toUpperCase() + photo.facilityType.slice(1)} Facility - ${photo.originalName}`,\n            date: photo.uploadDate,\n            inspector: 'Facility Manager',\n            facilityType: photo.facilityType,\n            facilityId: photo.facilityId,\n            localPath: photo.localPath,\n            originalName: photo.originalName,\n            size: photo.size\n          });\n        }\n      });\n      \n      return allPhotos;\n    } catch (error) {\n      console.error('Error loading inspection photos:', error);\n      return [];\n    }\n  };\n\n  const handleViewSchool = (schoolId) => {\n    const school = establishments.find(e => e.id === schoolId);\n    if (school) {\n      // Load actual inspection photos from storage\n      const inspectionPhotos = loadInspectionPhotos(schoolId);\n      \n      // Combine static photos with inspection photos\n      const allPhotos = [\n        ...(school.photos || []), // Keep existing static photos\n        ...inspectionPhotos // Add inspection photos\n      ];\n      \n      setSelectedSchool({\n        ...school,\n        photos: allPhotos\n      });\n    }\n  };\n\n  const handleBackToList = () => {\n    setSelectedSchool(null);\n    setSelectedPhoto(null);\n  };\n\n  const handleFacilityPhotoUpload = async (event) => {\n    const files = Array.from(event.target.files);\n    \n    if (!selectedSchool) {\n      alert('No school selected for photo upload.');\n      return;\n    }\n    \n    setUploadingFacilityPhotos(true);\n    \n    try {\n      const facilityId = `FACILITY_${selectedFacilityType.toUpperCase()}_${Date.now()}`;\n      \n      const photoPromises = files.map(async (file) => {\n        try {\n          const savedPhoto = await savePhotoToLocal(file, selectedSchool.id, facilityId);\n          return {\n            id: savedPhoto.id,\n            file: file,\n            name: savedPhoto.originalName,\n            filename: savedPhoto.filename,\n            path: savedPhoto.path,\n            size: savedPhoto.size,\n            preview: savedPhoto.url,\n            uploadDate: new Date().toISOString(),\n            localPath: `inspectPhotos/school_${selectedSchool.id}/facility_${selectedFacilityType}/${savedPhoto.filename}`,\n            facilityType: selectedFacilityType,\n            facilityId: facilityId\n          };\n        } catch (error) {\n          console.error('Error uploading facility photo:', file.name, error);\n          return null;\n        }\n      });\n      \n      const uploadedPhotos = await Promise.all(photoPromises);\n      const successfulUploads = uploadedPhotos.filter(photo => photo !== null);\n      \n      // Update the selected school with new facility photos\n      const updatedPhotos = [\n        ...(selectedSchool.photos || []),\n        ...successfulUploads.map(photo => ({\n          ...photo,\n          caption: `${selectedFacilityType.charAt(0).toUpperCase() + selectedFacilityType.slice(1)} Facility - ${photo.name}`,\n          date: photo.uploadDate,\n          inspector: 'Facility Manager',\n          facilityType: selectedFacilityType\n        }))\n      ];\n      \n      setSelectedSchool({\n        ...selectedSchool,\n        photos: updatedPhotos\n      });\n      \n      // Save facility photos to localStorage\n      const existingFacilityPhotos = JSON.parse(localStorage.getItem('facilityPhotos') || '[]');\n      const facilityPhotoData = successfulUploads.map(photo => ({\n        ...photo,\n        schoolId: selectedSchool.id,\n        facilityType: selectedFacilityType,\n        uploadDate: new Date().toISOString()\n      }));\n      \n      localStorage.setItem('facilityPhotos', JSON.stringify([...existingFacilityPhotos, ...facilityPhotoData]));\n      \n      if (successfulUploads.length < files.length) {\n        alert(`${files.length - successfulUploads.length} photos failed to upload. Please try again.`);\n      } else {\n        alert(`Successfully uploaded ${successfulUploads.length} ${selectedFacilityType} facility photos!`);\n      }\n      \n    } catch (error) {\n      console.error('Error during facility photo upload:', error);\n      alert('Error uploading facility photos. Please try again.');\n    } finally {\n      setUploadingFacilityPhotos(false);\n    }\n  };\n\n  const establishments = [\n    {\n      id: 1,\n      name: 'Government High School Bangalore North',\n      type: 'Government School',\n      owner: 'Karnataka Education Department',\n      location: 'Bangalore North, Karnataka',\n      phone: '+91 80 2234 5678',\n      email: 'ghsblrnorth@karnataka.gov.in',\n      licenseNumber: 'KGS-2024-001',\n      rating: 'B+',\n      status: 'Active',\n      lastInspection: '2024-01-15',\n      nextInspection: '2024-04-15',\n      violations: 2,\n      category: 'Higher Secondary',\n      level: 'State Level',\n      photos: [\n        {\n          id: 1,\n          url: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGMEY4RkYiLz4KICA8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRDZFQUY4IiByeD0iNSIvPgogIDxjaXJjbGUgY3g9IjgwIiBjeT0iMTIwIiByPSIyMCIgZmlsbD0iIzYzNzVGNCIvPgogIDx0ZXh0IHg9IjE1MCIgeT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMxRjJBMzciIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiPktpdGNoZW4gQXJlYTwvdGV4dD4KPC9zdmc+\",\n          caption: \"Clean kitchen facilities\",\n          date: \"2024-01-15\",\n          inspector: \"Rajesh Kumar\"\n        },\n        {\n          id: 2,\n          url: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGRUY3RUQiLz4KICA8ZWxsaXBzZSBjeD0iMTUwIiBjeT0iMTMwIiByeD0iODAiIHJ5PSI0MCIgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjRDFEOEUwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMUYyQTM3IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj5EaW5pbmcgQXJlYTwvdGV4dD4KPC9zdmc+\",\n          caption: \"Student dining area\",\n          date: \"2024-01-15\",\n          inspector: \"Rajesh Kumar\"\n        }\n      ]\n    },\n    {\n      id: 2,\n      name: 'Government Primary School Mysore',\n      type: 'Government School',\n      owner: 'Karnataka Education Department',\n      location: 'Mysore, Karnataka',\n      phone: '+91 821 2345 678',\n      email: 'gpsmysore@karnataka.gov.in',\n      licenseNumber: 'KGS-2024-002',\n      rating: 'A',\n      status: 'Active',\n      lastInspection: '2024-01-10',\n      nextInspection: '2024-04-10',\n      violations: 0,\n      category: 'Primary School',\n      level: 'District Level',\n      photos: [\n        {\n          id: 3,\n          url: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNGRkY3RUQiLz4KICA8cmVjdCB4PSIyMCIgeT0iNjAiIHdpZHRoPSIyNjAiIGhlaWdodD0iMTUiIGZpbGw9IiM4QjVDRjYiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMUYyQTM3IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj5TdG9yYWdlIEFyZWE8L3RleHQ+Cjwvc3ZnPg==\",\n          caption: \"Food storage facilities\",\n          date: \"2024-01-10\",\n          inspector: \"Priya Sharma\"\n        }\n      ]\n    },\n    {\n      id: 3,\n      name: 'Government Higher Secondary School Hubli',\n      type: 'Government School',\n      owner: 'Karnataka Education Department',\n      location: 'Hubli, Karnataka',\n      phone: '+91 836 2456 789',\n      email: 'ghsshubli@karnataka.gov.in',\n      licenseNumber: 'KGS-2024-003',\n      rating: 'A',\n      status: 'Active',\n      lastInspection: '2024-01-08',\n      nextInspection: '2024-04-08',\n      violations: 0,\n      category: 'Higher Secondary',\n      level: 'State Level'\n    },\n    {\n      id: 4,\n      name: 'Government Primary School Mangalore',\n      type: 'Government School',\n      owner: 'Karnataka Education Department',\n      location: 'Mangalore, Karnataka',\n      phone: '+91 824 2567 890',\n      email: 'gpsmangalore@karnataka.gov.in',\n      licenseNumber: 'KGS-2024-004',\n      rating: 'C',\n      status: 'Under Review',\n      lastInspection: '2024-01-20',\n      nextInspection: '2024-02-20',\n      violations: 4,\n      category: 'Primary School',\n      level: 'Taluk Level'\n    }\n  ];\n\n  const filteredEstablishments = establishments.filter(establishment => {\n    const matchesSearch = establishment.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         establishment.owner.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         establishment.location.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesFilter = filterStatus === 'all' || establishment.status.toLowerCase() === filterStatus;\n    \n    return matchesSearch && matchesFilter;\n  });\n\n  const getRatingColor = (rating) => {\n    switch (rating) {\n      case 'A': return 'bg-green-100 text-green-800';\n      case 'B+': case 'B': return 'bg-yellow-100 text-yellow-800';\n      case 'C': case 'D': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'Active': return 'badge-success';\n      case 'Under Review': return 'badge-warning';\n      case 'Suspended': return 'badge-danger';\n      default: return 'badge-info';\n    }\n  };\n\n  // Edit School Modal Component\n  const EditSchoolModal = ({ school, onClose, onSave }) => {\n    const [formData, setFormData] = useState({\n      name: school?.name || '',\n      type: school?.type || '',\n      owner: school?.owner || '',\n      location: school?.location || '',\n      phone: school?.phone || '',\n      email: school?.email || '',\n      licenseNumber: school?.licenseNumber || '',\n      category: school?.category || '',\n      status: school?.status || 'Active'\n    });\n\n    const handleInputChange = (e) => {\n      const { name, value } = e.target;\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    };\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      onSave({ ...school, ...formData });\n    };\n\n    if (!school) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"flex items-center justify-between p-6 border-b\">\n            <h2 className=\"text-xl font-bold text-gray-900\">Edit School Information</h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  School Name\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  School Type\n                </label>\n                <select\n                  name=\"type\"\n                  value={formData.type}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"Government School\">Government School</option>\n                  <option value=\"Government Aided School\">Government Aided School</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Category\n                </label>\n                <select\n                  name=\"category\"\n                  value={formData.category}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"Primary School\">Primary School</option>\n                  <option value=\"Higher Secondary\">Higher Secondary</option>\n                  <option value=\"High School\">High School</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  School Level\n                </label>\n                <select\n                  name=\"level\"\n                  value={formData.level}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"State Level\">State Level</option>\n                  <option value=\"District Level\">District Level</option>\n                  <option value=\"Taluk Level\">Taluk Level</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Status\n                </label>\n                <select\n                  name=\"status\"\n                  value={formData.status}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"Active\">Active</option>\n                  <option value=\"Under Review\">Under Review</option>\n                  <option value=\"Suspended\">Suspended</option>\n                </select>\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Owner/Department\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"owner\"\n                  value={formData.owner}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Location\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"location\"\n                  value={formData.location}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Phone Number\n                </label>\n                <input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.phone}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Email Address\n                </label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  License Number\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"licenseNumber\"\n                  value={formData.licenseNumber}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n              >\n                Save Changes\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // Photo Modal Component\n  const PhotoModal = ({ photo, onClose, onNext, onPrev, hasNext, hasPrev }) => {\n    if (!photo) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4\">\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-white hover:text-gray-300\"\n          aria-label=\"Close\"\n        >\n          <X size={32} />\n        </button>\n        \n        {hasPrev && (\n          <button\n            onClick={onPrev}\n            className=\"absolute left-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\"\n            aria-label=\"Previous photo\"\n          >\n            <ChevronLeft size={32} />\n          </button>\n        )}\n        \n        <div className=\"relative max-w-4xl w-full\">\n          <img\n            src={photo.url}\n            alt={photo.caption || 'Inspection photo'}\n            className=\"max-h-[80vh] w-auto mx-auto object-contain rounded-lg\"\n          />\n          <div className=\"mt-4 text-white text-center\">\n            <div className=\"flex items-center justify-center mb-2\">\n              <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                photo.inspectionId \n                  ? 'bg-blue-600 text-white' \n                  : photo.facilityType\n                  ? 'bg-green-600 text-white'\n                  : 'bg-gray-600 text-white'\n              }`}>\n                {photo.inspectionId \n                  ? '🔍 Inspection Photo' \n                  : photo.facilityType \n                  ? `${photo.facilityType === 'kitchen' ? '🍳' : photo.facilityType === 'storeroom' ? '📦' : '🏢'} ${photo.facilityType.charAt(0).toUpperCase() + photo.facilityType.slice(1)} Facility`\n                  : '📁 Archive Photo'}\n              </span>\n            </div>\n            <h3 className=\"text-xl font-semibold mb-2\">{photo.caption}</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n              <div className=\"text-left\">\n                <p className=\"text-gray-300\">\n                  <span className=\"font-medium\">Inspector:</span> {photo.inspector || 'Unknown'}\n                </p>\n                <p className=\"text-gray-300\">\n                  <span className=\"font-medium\">Date:</span> {new Date(photo.date).toLocaleDateString()}\n                </p>\n                {photo.originalName && (\n                  <p className=\"text-gray-300\">\n                    <span className=\"font-medium\">Original Name:</span> {photo.originalName}\n                  </p>\n                )}\n              </div>\n              <div className=\"text-left\">\n                {photo.size && (\n                  <p className=\"text-gray-300\">\n                    <span className=\"font-medium\">File Size:</span> {Math.round(photo.size / 1024)} KB\n                  </p>\n                )}\n                {photo.inspectionId && (\n                  <p className=\"text-gray-300\">\n                    <span className=\"font-medium\">Inspection ID:</span> {photo.inspectionId}\n                  </p>\n                )}\n                {photo.localPath && (\n                  <p className=\"text-gray-300 truncate\">\n                    <span className=\"font-medium\">Local Path:</span> {photo.localPath}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {hasNext && (\n          <button\n            onClick={onNext}\n            className=\"absolute right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\"\n            aria-label=\"Next photo\"\n          >\n            <ChevronRight size={32} />\n          </button>\n        )}\n      </div>\n    );\n  };\n\n  // If a school is selected, show school detail view\n  if (selectedSchool) {\n    return (\n      <div className=\"space-y-8\">\n        {/* Header with Back Button */}\n        <div className=\"glass-card p-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={handleBackToList}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-colors\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </button>\n              <div>\n                <h1 className=\"text-3xl font-bold text-white\">{selectedSchool.name}</h1>\n                <p className=\"text-gray-300\">{selectedSchool.location}</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span className={`px-3 py-1 rounded text-sm font-bold ${getRatingColor(selectedSchool.rating)}`}>\n                {selectedSchool.rating}\n              </span>\n              <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(selectedSchool.status)}`}>\n                {selectedSchool.status}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* School Details */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* School Information */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"glass-card p-6\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">School Information</h2>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center text-sm\">\n                  <Store className=\"w-4 h-4 mr-3 text-gray-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">{selectedSchool.type}</p>\n                    <p className=\"text-gray-600\">{selectedSchool.category}</p>\n                    {selectedSchool.level && (\n                      <span className={`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ${\n                        selectedSchool.level === 'State Level' ? 'bg-purple-100 text-purple-800' :\n                        selectedSchool.level === 'District Level' ? 'bg-blue-100 text-blue-800' :\n                        'bg-green-100 text-green-800'\n                      }`}>\n                        {selectedSchool.level}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <MapPin className=\"w-4 h-4 mr-3 text-gray-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">Location</p>\n                    <p className=\"text-gray-600\">{selectedSchool.location}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <Phone className=\"w-4 h-4 mr-3 text-gray-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">Phone</p>\n                    <p className=\"text-gray-600\">{selectedSchool.phone}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <Mail className=\"w-4 h-4 mr-3 text-gray-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">Email</p>\n                    <p className=\"text-gray-600\">{selectedSchool.email}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <Calendar className=\"w-4 h-4 mr-3 text-gray-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">Last Inspection</p>\n                    <p className=\"text-gray-600\">{selectedSchool.lastInspection}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Facility Photo Upload */}\n            <div className=\"glass-card p-6 mt-6\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Upload Facility Photos</h2>\n              \n              {/* Facility Type Selection */}\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Facility Type\n                </label>\n                <select\n                  value={selectedFacilityType}\n                  onChange={(e) => setSelectedFacilityType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"kitchen\">🍳 Kitchen Facilities</option>\n                  <option value=\"storeroom\">📦 Store Room</option>\n                  <option value=\"dining\">🍽️ Dining Area</option>\n                  <option value=\"washroom\">🚿 Wash Room</option>\n                  <option value=\"playground\">⚽ Playground</option>\n                  <option value=\"classroom\">📚 Classroom</option>\n                </select>\n              </div>\n\n              {/* Photo Upload Area */}\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n                <Camera className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 mb-2\">\n                  Upload {selectedFacilityType} facility photos\n                </p>\n                <p className=\"text-xs text-gray-500 mb-4\">\n                  Photos will be stored in: inspectPhotos/school_{selectedSchool.id}/facility_{selectedFacilityType}/\n                </p>\n                <input\n                  type=\"file\"\n                  id=\"facility-photo-upload\"\n                  multiple\n                  accept=\"image/*\"\n                  onChange={handleFacilityPhotoUpload}\n                  className=\"hidden\"\n                  disabled={uploadingFacilityPhotos}\n                />\n                <button \n                  type=\"button\"\n                  onClick={() => document.getElementById('facility-photo-upload').click()}\n                  disabled={uploadingFacilityPhotos}\n                  className={`px-4 py-2 rounded-lg transition-colors ${\n                    uploadingFacilityPhotos \n                      ? 'bg-gray-400 cursor-not-allowed text-white' \n                      : 'bg-green-600 hover:bg-green-700 text-white'\n                  }`}\n                >\n                  {uploadingFacilityPhotos ? 'Uploading...' : `Upload ${selectedFacilityType.charAt(0).toUpperCase() + selectedFacilityType.slice(1)} Photos`}\n                </button>\n              </div>\n\n              {/* Facility Photo Statistics */}\n              <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                <div className=\"bg-green-50 p-3 rounded-lg text-center\">\n                  <p className=\"text-lg font-bold text-green-600\">\n                    {selectedSchool.photos?.filter(p => p.facilityType === 'kitchen').length || 0}\n                  </p>\n                  <p className=\"text-xs text-green-600\">Kitchen Photos</p>\n                </div>\n                <div className=\"bg-blue-50 p-3 rounded-lg text-center\">\n                  <p className=\"text-lg font-bold text-blue-600\">\n                    {selectedSchool.photos?.filter(p => p.facilityType === 'storeroom').length || 0}\n                  </p>\n                  <p className=\"text-xs text-blue-600\">Store Room Photos</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Photo Gallery */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"glass-card p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Inspection Photo Gallery</h2>\n                <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                  <Camera className=\"w-4 h-4\" />\n                  <span>{selectedSchool.photos?.length || 0} photos</span>\n                </div>\n              </div>\n              \n              {selectedSchool.photos && selectedSchool.photos.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {/* Photo Statistics */}\n                  <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\">\n                    <div className=\"bg-blue-50 p-3 rounded-lg text-center\">\n                      <p className=\"text-2xl font-bold text-blue-600\">\n                        {selectedSchool.photos.filter(p => p.inspectionId).length}\n                      </p>\n                      <p className=\"text-xs text-blue-600\">Inspection Photos</p>\n                    </div>\n                    <div className=\"bg-green-50 p-3 rounded-lg text-center\">\n                      <p className=\"text-2xl font-bold text-green-600\">\n                        {selectedSchool.photos.filter(p => p.facilityType).length}\n                      </p>\n                      <p className=\"text-xs text-green-600\">Facility Photos</p>\n                    </div>\n                    <div className=\"bg-gray-50 p-3 rounded-lg text-center\">\n                      <p className=\"text-2xl font-bold text-gray-600\">\n                        {selectedSchool.photos.filter(p => !p.inspectionId && !p.facilityType).length}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">Archive Photos</p>\n                    </div>\n                    <div className=\"bg-purple-50 p-3 rounded-lg text-center\">\n                      <p className=\"text-2xl font-bold text-purple-600\">\n                        {new Set(selectedSchool.photos.filter(p => p.inspector).map(p => p.inspector)).size}\n                      </p>\n                      <p className=\"text-xs text-purple-600\">Inspectors</p>\n                    </div>\n                    <div className=\"bg-orange-50 p-3 rounded-lg text-center\">\n                      <p className=\"text-2xl font-bold text-orange-600\">\n                        {Math.round(selectedSchool.photos.reduce((sum, p) => sum + (p.size || 0), 0) / 1024)}\n                      </p>\n                      <p className=\"text-xs text-orange-600\">Total KB</p>\n                    </div>\n                  </div>\n\n                  {/* Photo Grid */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {selectedSchool.photos.map((photo, index) => (\n                      <div \n                        key={photo.id || index} \n                        className=\"relative group cursor-pointer bg-white border rounded-lg overflow-hidden hover:shadow-lg transition-all duration-200\"\n                        onClick={() => setSelectedPhoto(photo)}\n                      >\n                        {/* Photo Type Badge */}\n                        <div className=\"absolute top-2 left-2 z-10\">\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                            photo.inspectionId \n                              ? 'bg-blue-100 text-blue-800' \n                              : photo.facilityType\n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-gray-100 text-gray-800'\n                          }`}>\n                            {photo.inspectionId \n                              ? '🔍 Inspection' \n                              : photo.facilityType \n                              ? `${photo.facilityType === 'kitchen' ? '🍳' : photo.facilityType === 'storeroom' ? '📦' : '🏢'} ${photo.facilityType.charAt(0).toUpperCase() + photo.facilityType.slice(1)}`\n                              : '📁 Archive'}\n                          </span>\n                        </div>\n\n                        <img\n                          src={photo.url}\n                          alt={photo.caption}\n                          className=\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200\"\n                        />\n                        \n                        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center\">\n                          <Eye className=\"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\n                        </div>\n                        \n                        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3\">\n                          <p className=\"text-white text-sm font-medium truncate\">{photo.caption}</p>\n                          <div className=\"flex items-center justify-between text-xs text-gray-300 mt-1\">\n                            <span>{new Date(photo.date).toLocaleDateString()}</span>\n                            {photo.size && (\n                              <span>{Math.round(photo.size / 1024)} KB</span>\n                            )}\n                          </div>\n                          {photo.inspector && (\n                            <p className=\"text-xs text-gray-400 truncate\">By: {photo.inspector}</p>\n                          )}\n                        </div>\n\n                        {/* Local Path Info */}\n                        {photo.localPath && (\n                          <div className=\"absolute top-2 right-2 z-10\">\n                            <div className=\"bg-black bg-opacity-70 text-white p-1 rounded text-xs\" title={photo.localPath}>\n                              📁\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <Image className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-500\">No inspection photos available</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Photo Modal */}\n        {selectedPhoto && (\n          <PhotoModal\n            photo={selectedPhoto}\n            onClose={() => setSelectedPhoto(null)}\n            onNext={() => {\n              const currentIndex = selectedSchool.photos.findIndex(p => p.id === selectedPhoto.id);\n              if (currentIndex < selectedSchool.photos.length - 1) {\n                setSelectedPhoto(selectedSchool.photos[currentIndex + 1]);\n              }\n            }}\n            onPrev={() => {\n              const currentIndex = selectedSchool.photos.findIndex(p => p.id === selectedPhoto.id);\n              if (currentIndex > 0) {\n                setSelectedPhoto(selectedSchool.photos[currentIndex - 1]);\n              }\n            }}\n            hasNext={selectedSchool.photos.findIndex(p => p.id === selectedPhoto.id) < selectedSchool.photos.length - 1}\n            hasPrev={selectedSchool.photos.findIndex(p => p.id === selectedPhoto.id) > 0}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"glass-card p-8\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold text-white\">Karnataka Government School Management</h1>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Add School\n            </button>\n            <button\n              onClick={handleNewInspection}\n              className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\"\n            >\n              <Calendar className=\"w-5 h-5\" />\n              New Inspection\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Search and Filter */}\n      <div className=\"glass-card p-6\">\n        <div className=\"flex flex-col md:flex-row gap-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search government schools...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div className=\"flex gap-2\">\n            <select\n              className=\"input\"\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"under review\">Under Review</option>\n              <option value=\"suspended\">Suspended</option>\n            </select>\n            <button className=\"btn-secondary flex items-center space-x-2\">\n              <Filter className=\"w-4 h-4\" />\n              <span>More Filters</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Establishments Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n        {filteredEstablishments.map((establishment) => (\n          <div key={establishment.id} className=\"glass-card p-6 hover:shadow-xl transition-all duration-300\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center\">\n                  <Store className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-gray-900\">{establishment.name}</h3>\n                  <p className=\"text-sm text-gray-600\">{establishment.type}</p>\n                  {establishment.level && (\n                    <span className={`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ${\n                      establishment.level === 'State Level' ? 'bg-purple-100 text-purple-800' :\n                      establishment.level === 'District Level' ? 'bg-blue-100 text-blue-800' :\n                      'bg-green-100 text-green-800'\n                    }`}>\n                      {establishment.level}\n                    </span>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <span className={`px-2 py-1 rounded text-xs font-bold ${getRatingColor(establishment.rating)}`}>\n                  {establishment.rating}\n                </span>\n                <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(establishment.status)}`}>\n                  {establishment.status}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"space-y-3 mb-4\">\n              <div className=\"flex items-center text-sm text-gray-600\">\n                <MapPin className=\"w-4 h-4 mr-2\" />\n                {establishment.location}\n              </div>\n              <div className=\"flex items-center text-sm text-gray-600\">\n                <Phone className=\"w-4 h-4 mr-2\" />\n                {establishment.phone}\n              </div>\n              <div className=\"flex items-center text-sm text-gray-600\">\n                <Mail className=\"w-4 h-4 mr-2\" />\n                {establishment.email}\n              </div>\n            </div>\n\n            <div className=\"border-t pt-4\">\n              <div className=\"flex items-center justify-between text-sm mb-2\">\n                <span className=\"text-gray-600\">License:</span>\n                <span className=\"font-medium\">{establishment.licenseNumber}</span>\n              </div>\n              <div className=\"flex items-center justify-between text-sm mb-2\">\n                <span className=\"text-gray-600\">Last Inspection:</span>\n                <span className=\"font-medium\">{establishment.lastInspection}</span>\n              </div>\n              <div className=\"flex items-center justify-between text-sm mb-4\">\n                <span className=\"text-gray-600\">Violations:</span>\n                <span className={`font-medium ${establishment.violations > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                  {establishment.violations}\n                </span>\n              </div>\n\n              <div className=\"flex space-x-2\">\n                <button \n                  onClick={() => handleViewSchool(establishment.id)}\n                  className=\"flex-1 bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-3 rounded-lg flex items-center justify-center transition-colors\"\n                >\n                  <Eye className=\"w-4 h-4 mr-1\" />\n                  View\n                </button>\n                <button \n                  onClick={() => handleEditSchool(establishment.id)}\n                  className=\"flex-1 btn-secondary text-sm py-2 hover:bg-blue-50 transition-colors\"\n                >\n                  <Edit className=\"w-4 h-4 mr-1\" />\n                  Edit\n                </button>\n                <button \n                  onClick={() => handleInspectSchool(establishment.id)}\n                  className=\"flex-1 btn-primary text-sm py-2 hover:bg-blue-700 transition-colors\"\n                >\n                  <Calendar className=\"w-4 h-4 mr-1\" />\n                  Inspect\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"glass-card p-6 text-center\">\n          <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n            <Store className=\"w-6 h-6 text-blue-600\" />\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900\">{establishments.length}</h3>\n          <p className=\"text-gray-600\">Total Establishments</p>\n        </div>\n        \n        <div className=\"glass-card p-6 text-center\">\n          <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n            <CheckCircle className=\"w-6 h-6 text-green-600\" />\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            {establishments.filter(e => e.status === 'Active').length}\n          </h3>\n          <p className=\"text-gray-600\">Active</p>\n        </div>\n        \n        <div className=\"glass-card p-6 text-center\">\n          <div className=\"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n            <Clock className=\"w-6 h-6 text-yellow-600\" />\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            {establishments.filter(e => e.status === 'Under Review').length}\n          </h3>\n          <p className=\"text-gray-600\">Under Review</p>\n        </div>\n        \n        <div className=\"glass-card p-6 text-center\">\n          <div className=\"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n            <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            {establishments.reduce((sum, e) => sum + e.violations, 0)}\n          </h3>\n          <p className=\"text-gray-600\">Total Violations</p>\n        </div>\n      </div>\n\n      {/* Inspection Form Modal */}\n      {showInspectionForm && (\n        <InspectionForm\n          onClose={handleCloseInspectionForm}\n          preSelectedSchoolId={selectedSchoolForInspection}\n          isModal={true}\n        />\n      )}\n\n      {/* Edit School Modal */}\n      {showEditModal && editingSchool && (\n        <EditSchoolModal\n          school={editingSchool}\n          onClose={handleCloseEditModal}\n          onSave={handleSaveSchool}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default EstablishmentManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}